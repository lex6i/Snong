<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">


  </head>
  <body>
    <main>
    </main>
    <meta charset="utf-8" />
<script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.17.0/firebase-app.js'

    import { getFirestore, collection, doc, setDoc, getDoc } from 'https://www.gstatic.com/firebasejs/9.17.0/firebase-firestore.js'
	var config = {
		apiKey: "AIzaSyCQ69hWV4pZUq9PocrNPegUdmcNTZ2ihlg",
		authDomain: "snong-12425.firebaseapp.com",
		projectId: "snong-12425",
		storageBucket: "snong-12425.appspot.com",
		messagingSenderId: "715241035472",
		appId: "1:715241035472:web:f553abca6737ca465770d5",
		databaseURL: "https://highscore.firebaseio.com"
	}

	var app = initializeApp(config);
	var database = getFirestore(app);
	//var highScoreDb = doc(database, "HighScore")	
	//console.log(highScoreDb);

	window.getHighScore = async function() {
		const ref = 
			await doc(
				database,
				"highscore",
				"9Ry6PaWuGCHlxv9byhDt"
			)
		const docum = await getDoc(ref);
		return docum.data().HighScore;
 	}

	window.setHighScore = async function(newHighScore) {
		const prevHighScore = await window.getHighScore();
		if(prevHighScore < newHighScore){
			//set new high score
			await setDoc(
				doc(
				database, 
				"highscore", 
				"9Ry6PaWuGCHlxv9byhDt"	
				),
				{
					HighScore: newHighScore
				}
			);

			return "new";
		}

		return prevHighScore;
	}

</script>
    <script src="dbConnect.js"></script>
    <script src="ball.js"></script>
    <script src="snake.js"></script>
    <script src="paddle.js"></script>
    <script src="sketch.js"></script>
  </body>
</html>
